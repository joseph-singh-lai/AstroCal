<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Astronomy Explorer - Interactive astronomy events, satellite imagery, and sky map for La Brea, Trinidad & Tobago">
    <meta name="theme-color" content="#0a0e27">
    <meta property="og:title" content="AstroCal - Astronomy Explorer">
    <meta property="og:description" content="Track meteor showers, ISS passes, NASA APOD, and more for La Brea, Trinidad & Tobago">
    <meta property="og:type" content="website">
    <title>AstroCal - Astronomy Explorer</title>
    <!-- Custom favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cdefs%3E%3ClinearGradient id='g' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' stop-color='%236b8dd6'/%3E%3Cstop offset='100%25' stop-color='%239d7ce8'/%3E%3C/linearGradient%3E%3C/defs%3E%3Ccircle cx='50' cy='50' r='45' fill='%230a0e27'/%3E%3Ccircle cx='50' cy='50' r='40' fill='none' stroke='url(%23g)' stroke-width='3'/%3E%3Ccircle cx='35' cy='40' r='3' fill='%23fff'/%3E%3Ccircle cx='60' cy='35' r='2' fill='%236b8dd6'/%3E%3Ccircle cx='55' cy='55' r='2.5' fill='%239d7ce8'/%3E%3Ccircle cx='40' cy='60' r='1.5' fill='%23fff'/%3E%3Cpath d='M65 60 L75 50 L85 55 L75 45 L80 35' stroke='%23ffd700' stroke-width='2' fill='none' stroke-linecap='round'/%3E%3C/svg%3E">
    <!-- Google Fonts - Distinctive space-themed typography -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700;800;900&family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <!-- Leaflet CSS for GIBS map -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script>
        // NASA API Configuration (inlined to avoid MIME type issues on Vercel)
        window.NASA_API_CONFIG = {
            apiKey: 'X2dVwncjWkOz6OrVnWpO16W5eWE6NaAXz3BHH67Q',
            baseUrl: 'https://api.nasa.gov',
            
            // Cache settings (in milliseconds)
            cacheSettings: {
                apod: 24 * 60 * 60 * 1000,      // 24 hours (APOD is daily)
                donki: 6 * 60 * 60 * 1000,      // 6 hours (solar events update frequently)
                eonet: 12 * 60 * 60 * 1000,     // 12 hours (natural events)
            },
            
            // Date ranges for fetching events
            dateRanges: {
                donki: {
                    startDate: new Date(Date.now() - 30 * 24 * 60 * 60 * 1000).toISOString().split('T')[0], // 30 days ago
                    endDate: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000).toISOString().split('T')[0]   // 30 days ahead
                },
                eonet: {
                    days: 30 // Last 30 days
                }
            }
        };
        
        // Also expose as const for backward compatibility
        const NASA_API_CONFIG = window.NASA_API_CONFIG;
        
        // Note: Astronomy API (api.astronomyapi.com) requires server-side proxy due to CORS
        // Replaced with Open-Meteo Astronomy API (free, CORS-enabled, no key required)
        // Old credentials kept in api-info-DO-NOT-DELETE.txt for reference
    </script>
</head>
<body>
    <!-- Central Sun -->
    <div class="sun"></div>
    
    <!-- Orbital Container -->
    <div class="orbit-container">
        <!-- Animated Planets in Orbit -->
        <div class="planet-1"></div>
        <div class="planet-2"></div>
        <div class="planet-3"></div>
        <div class="planet-4"></div>
        <div class="planet-5"></div>
        <div class="planet-6"></div>
    </div>
    
    <!-- Animated Galaxies/Nebulae -->
    <div class="galaxy-1"></div>
    <div class="galaxy-2"></div>
    <div class="galaxy-3"></div>
    
    <div id="app">
        <header class="main-header" id="mainHeader">
            <div class="header-inner">
                <div class="header-content">
                    <h1 class="site-title">
                        <span class="title-icon">‚ú¶</span>
                        AstroCal
                    </h1>
                    <p class="location-subtitle">
                        <span class="location-dot"></span>
                        La Brea, Trinidad & Tobago
                    </p>
                </div>
                <nav class="main-nav">
                    <button class="nav-button active" data-section="events">
                        <span class="nav-icon">üìÖ</span>
                        <span class="nav-text">Events</span>
                    </button>
                    <button class="nav-button" data-section="gibs">
                        <span class="nav-icon">üõ∞Ô∏è</span>
                        <span class="nav-text">Satellite</span>
                    </button>
                    <button class="nav-button" data-section="sky">
                        <span class="nav-icon">‚≠ê</span>
                        <span class="nav-text">Sky Map</span>
                    </button>
                    <button class="nav-button" data-section="glossary">
                        <span class="nav-icon">üìñ</span>
                        <span class="nav-text">Glossary</span>
                    </button>
                </nav>
            </div>
            <!-- Motion toggle for accessibility -->
            <button class="motion-toggle" id="motionToggle" title="Toggle background animations" aria-label="Toggle background animations">
                <span class="motion-icon">üåå</span>
            </button>
        </header>

        <main class="main-content">
            <!-- Events Section -->
            <section id="events-section" class="content-section active">
                <!-- Quick Actions Bar -->
                <div class="quick-actions-bar">
                    <button id="refreshNASA" class="refresh-button">
                        <span class="refresh-icon">üîÑ</span>
                        <span class="refresh-text">Refresh NASA Data</span>
                    </button>
                    <button id="filterToggleMobile" class="filter-toggle-mobile">
                        <span>üéõÔ∏è Filters</span>
                        <span class="filter-count" id="filterCount">1</span>
                    </button>
                </div>
                
                <div class="events-layout">
                    <aside class="filter-panel" id="filterPanel">
                        <div class="filter-header">
                            <h2>üéõÔ∏è Filters</h2>
                            <button class="filter-close-mobile" id="filterCloseMobile">‚úï</button>
                        </div>
                        <div class="filter-options">
                            <label class="filter-checkbox">
                                <input type="checkbox" value="meteor">
                                <span class="checkbox-custom"></span>
                                <span class="filter-label">
                                    <span class="filter-emoji">‚òÑÔ∏è</span>
                                    Meteor Showers
                                </span>
                            </label>
                            <label class="filter-checkbox">
                                <input type="checkbox" value="planet">
                                <span class="checkbox-custom"></span>
                                <span class="filter-label">
                                    <span class="filter-emoji">ü™ê</span>
                                    Planet Visibility
                                </span>
                            </label>
                            <label class="filter-checkbox">
                                <input type="checkbox" value="iss">
                                <span class="checkbox-custom"></span>
                                <span class="filter-label">
                                    <span class="filter-emoji">üöÄ</span>
                                    ISS Passes
                                </span>
                            </label>
                            <label class="filter-checkbox">
                                <input type="checkbox" value="apod" checked>
                                <span class="checkbox-custom"></span>
                                <span class="filter-label">
                                    <span class="filter-emoji">üì∏</span>
                                    NASA APOD
                                </span>
                            </label>
                            <label class="filter-checkbox">
                                <input type="checkbox" value="solar">
                                <span class="checkbox-custom"></span>
                                <span class="filter-label">
                                    <span class="filter-emoji">‚òÄÔ∏è</span>
                                    Solar Events
                                </span>
                            </label>
                            <label class="filter-checkbox">
                                <input type="checkbox" value="natural">
                                <span class="checkbox-custom"></span>
                                <span class="filter-label">
                                    <span class="filter-emoji">üåã</span>
                                    Natural Events
                                </span>
                            </label>
                            <label class="filter-checkbox">
                                <input type="checkbox" value="workshop">
                                <span class="checkbox-custom"></span>
                                <span class="filter-label">
                                    <span class="filter-emoji">üéì</span>
                                    Workshops
                                </span>
                            </label>
                            <label class="filter-checkbox">
                                <input type="checkbox" value="astronomy">
                                <span class="checkbox-custom"></span>
                                <span class="filter-label">
                                    <span class="filter-emoji">üåô</span>
                                    Astronomy
                                </span>
                            </label>
                        </div>
                        <div class="filter-actions">
                            <button id="selectAllFilters" class="filter-action-btn">Select All</button>
                            <button id="clearAllFilters" class="filter-action-btn">Clear All</button>
                        </div>
                    </aside>

                    <div class="events-content">
                        <!-- Loading Progress Bar -->
                        <div id="loadingProgress" class="loading-progress-container" style="display: none;">
                            <div class="loading-progress-bar">
                                <div id="loadingProgressFill" class="loading-progress-fill"></div>
                            </div>
                            <div id="loadingProgressText" class="loading-progress-text">Loading events...</div>
                        </div>
                        <section class="controls-section">
                            <div class="search-container">
                                <input 
                                    type="text" 
                                    id="searchInput" 
                                    class="search-input" 
                                    placeholder="Search events..."
                                    aria-label="Search events"
                                >
                            </div>

                            <div class="location-container">
                                <div class="location-info">
                                    <div class="location-status-wrapper">
                                        <span id="locationStatus" class="location-status">üìç Using default location: La Brea, Trinidad & Tobago</span>
                                        <span class="location-privacy">Your location is only used locally and never shared with external services.</span>
                                    </div>
                                    <div class="location-buttons">
                                        <button id="locationButton" class="location-button" aria-label="Request location access">
                                            üìç Use My Location
                                        </button>
                                        <button id="clearLocationButton" class="location-button location-button-secondary" aria-label="Clear saved location" style="display: none;">
                                            üîÑ Reset
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </section>

                        <section class="events-section">
                            <div id="eventsContainer" class="events-container" role="list">
                                <!-- Events will be dynamically rendered here -->
                            </div>
                        </section>
                    </div>
                </div>

            <section id="eventDetail" class="event-detail-section" aria-live="polite">
                <!-- Event details will be populated dynamically -->
            </section>
            </section>

            <!-- Satellite Imagery Section -->
            <section id="gibs-section" class="content-section">
                <div class="section-header">
                    <h2>üõ∞Ô∏è Satellite Imagery Explorer</h2>
                    <p class="section-description">Explore Earth with NASA GIBS satellite imagery, ESRI, and live weather data</p>
                </div>
                
                <div class="map-controls">
                    <div class="layer-controls">
                        <label for="gibs-layer-select" class="layer-label">Imagery Layer:</label>
                        <select id="gibs-layer-select" class="layer-select">
                            <!-- Options populated by JavaScript -->
                        </select>
                    </div>
                    <div class="map-buttons">
                        <button id="centerMapButton" class="map-button">üìç My Location</button>
                        <button id="centerDefaultButton" class="map-button">üè† La Brea</button>
                    </div>
                </div>
                
                <div id="gibs-map" class="map-container"></div>
                
                <div class="map-info-bar">
                    <div id="layer-info" class="layer-info">
                        <strong>ESRI World Imagery</strong>
                    </div>
                    <div class="map-tips">
                        <span>üñ±Ô∏è Drag to pan</span>
                        <span>üîç Scroll to zoom</span>
                    </div>
                </div>
            </section>

            <!-- Interactive Sky Map Section -->
            <section id="sky-section" class="content-section">
                <div class="section-header">
                    <h2>üåå Interactive Sky Map</h2>
                    <p class="section-description">A real-time planetarium ‚Äì explore the night sky from your location</p>
                </div>
                
                <!-- Sky Map Controls -->
                <div class="sky-controls">
                    <!-- Location & View Controls -->
                    <div class="sky-control-group">
                        <button id="sky-use-location" class="sky-btn sky-btn-primary">
                            <span>üìç</span> My Location
                        </button>
                        <button id="sky-reset-view" class="sky-btn">
                            <span>üîÑ</span> Reset View
                        </button>
                    </div>
                    
                    <!-- Direction Quick-Look -->
                    <div class="sky-control-group sky-directions">
                        <button class="sky-btn sky-dir" data-az="0" data-alt="45">N</button>
                        <button class="sky-btn sky-dir" data-az="90" data-alt="45">E</button>
                        <button class="sky-btn sky-dir" data-az="180" data-alt="45">S</button>
                        <button class="sky-btn sky-dir" data-az="270" data-alt="45">W</button>
                        <button class="sky-btn sky-dir" data-az="0" data-alt="90">‚Üë</button>
                    </div>
                    
                    <!-- Display Toggles -->
                    <div class="sky-control-group sky-toggles">
                        <label class="sky-toggle-label">
                            <input type="checkbox" id="sky-show-constellations" checked>
                            <span class="sky-toggle-switch"></span>
                            <span>Constellations</span>
                        </label>
                        <label class="sky-toggle-label">
                            <input type="checkbox" id="sky-show-constellation-names" checked>
                            <span class="sky-toggle-switch"></span>
                            <span>Names</span>
                        </label>
                        <label class="sky-toggle-label">
                            <input type="checkbox" id="sky-show-planets" checked>
                            <span class="sky-toggle-switch"></span>
                            <span>Planets</span>
                        </label>
                        <label class="sky-toggle-label">
                            <input type="checkbox" id="sky-show-grid">
                            <span class="sky-toggle-switch"></span>
                            <span>Grid</span>
                        </label>
                    </div>
                    
                    <!-- Time Controls -->
                    <div class="sky-control-group sky-time-controls">
                        <button id="sky-time-slower" class="sky-btn sky-time-btn">‚è™</button>
                        <button id="sky-time-now" class="sky-btn sky-btn-primary">Now</button>
                        <button id="sky-time-faster" class="sky-btn sky-time-btn">‚è©</button>
                        <span id="sky-time-speed" class="sky-time-indicator">1√ó</span>
                    </div>
                    
                    <!-- Clock Display -->
                    <div class="sky-clock-display">
                        <div class="sky-clock-time" id="sky-clock-time">00:00:00</div>
                        <div class="sky-clock-date" id="sky-clock-date">Jan 1, 2026</div>
                    </div>
                </div>
                
                <!-- Sky Map Canvas -->
                <div class="sky-map-container">
                    <canvas id="skyCanvas"></canvas>
                    
                    <!-- Compass Overlay -->
                    <div class="sky-compass">
                        <span class="compass-n">N</span>
                        <span class="compass-e">E</span>
                        <span class="compass-s">S</span>
                        <span class="compass-w">W</span>
                    </div>
                    
                    <!-- Zoom Controls -->
                    <div class="sky-zoom-controls">
                        <button id="sky-zoom-in" class="sky-btn sky-zoom-btn">+</button>
                        <button id="sky-zoom-out" class="sky-btn sky-zoom-btn">‚àí</button>
                    </div>
                </div>
                
                <!-- Quick Legend -->
                <div class="sky-legend">
                    <div class="legend-item"><span class="legend-dot star"></span> Stars</div>
                    <div class="legend-item"><span class="legend-dot planet"></span> Planets</div>
                    <div class="legend-item"><span class="legend-line"></span> Constellations</div>
                </div>
            </section>

            <!-- Glossary Section -->
            <section id="glossary-section" class="content-section">
                <div class="section-header glossary-header">
                    <div class="glossary-hero">
                        <div class="glossary-hero-bg"></div>
                        <h2>üìñ Glossary</h2>
                        <p class="section-description">Your guide to astronomy terminology and NASA acronyms</p>
                    </div>
                    <div class="glossary-search-wrapper">
                        <input type="text" id="glossarySearch" class="glossary-search" placeholder="üîç Search terms...">
                    </div>
                </div>
                
                <div class="glossary-container">
                    <div class="glossary-category">
                        <h3>NASA APIs & Services</h3>
                        <div class="glossary-items">
                            <div class="glossary-item">
                                <strong>APOD</strong>
                                <p>Astronomy Picture of the Day - A daily image or video of our fascinating universe, along with a brief explanation written by a professional astronomer.</p>
                            </div>
                            <div class="glossary-item">
                                <strong>DONKI</strong>
                                <p>Space Weather Database Of Notifications, Knowledge, Information - NASA's comprehensive database for space weather events including solar flares and coronal mass ejections.</p>
                            </div>
                            <div class="glossary-item">
                                <strong>EONET</strong>
                                <p>Earth Observatory Natural Event Tracker - A system that tracks natural events on Earth such as wildfires, storms, and volcanic activity that may be visible from space.</p>
                            </div>
                            <div class="glossary-item">
                                <strong>GIBS</strong>
                                <p>Global Imagery Browse Services - NASA's system for providing satellite imagery and Earth observation data in a standardized format.</p>
                            </div>
                        </div>
                    </div>

                    <div class="glossary-category">
                        <h3>Space Weather Terms</h3>
                        <div class="glossary-items">
                            <div class="glossary-item">
                                <strong>CME</strong>
                                <p>Coronal Mass Ejection - A massive burst of solar wind and magnetic fields rising above the solar corona or being released into space. CMEs can affect Earth's magnetosphere and cause geomagnetic storms.</p>
                            </div>
                            <div class="glossary-item">
                                <strong>Solar Flare</strong>
                                <p>A sudden flash of increased brightness on the Sun, usually observed near its surface and in close proximity to a sunspot group. Flares are classified by their X-ray intensity (A, B, C, M, or X class).</p>
                            </div>
                            <div class="glossary-item">
                                <strong>FLR</strong>
                                <p>Solar Flare - The abbreviation used in NASA's DONKI database for solar flare events.</p>
                            </div>
                        </div>
                    </div>

                    <div class="glossary-category">
                        <h3>Spacecraft & Stations</h3>
                        <div class="glossary-items">
                            <div class="glossary-item">
                                <strong>ISS</strong>
                                <p>International Space Station - A modular space station in low Earth orbit. It's the largest human-made object in space and can be seen from Earth with the naked eye.</p>
                            </div>
                        </div>
                    </div>

                    <div class="glossary-category">
                        <h3>Astronomy Terms</h3>
                        <div class="glossary-items">
                            <div class="glossary-item">
                                <strong>Magnitude</strong>
                                <p>A measure of the brightness of a celestial object. Lower numbers indicate brighter objects. The brightest stars have negative magnitudes.</p>
                            </div>
                            <div class="glossary-item">
                                <strong>Elevation</strong>
                                <p>The angle between the object and the observer's local horizon. Objects at 0¬∞ are on the horizon, while 90¬∞ is directly overhead (zenith).</p>
                            </div>
                            <div class="glossary-item">
                                <strong>Azimuth</strong>
                                <p>The compass direction of an object, measured in degrees from north (0¬∞) through east (90¬∞), south (180¬∞), and west (270¬∞).</p>
                            </div>
                            <div class="glossary-item">
                                <strong>Meteor Shower</strong>
                                <p>A celestial event where numerous meteors are observed to radiate from one point in the night sky. These meteors are caused by streams of cosmic debris entering Earth's atmosphere.</p>
                            </div>
                            <div class="glossary-item">
                                <strong>Planet Visibility</strong>
                                <p>The times when planets are visible in the night sky from a specific location. Visibility depends on the planet's position relative to the Sun and Earth.</p>
                            </div>
                        </div>
                    </div>

                    <div class="glossary-category">
                        <h3>Technical Terms</h3>
                        <div class="glossary-items">
                            <div class="glossary-item">
                                <strong>CORS</strong>
                                <p>Cross-Origin Resource Sharing - A security feature that allows web pages to request resources from a different domain. Some APIs require server-side proxies to bypass CORS restrictions.</p>
                            </div>
                            <div class="glossary-item">
                                <strong>Open-Meteo</strong>
                                <p>A free, open-source weather API that provides astronomical data including sunrise/sunset times and moon phases without requiring an API key.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <footer class="main-footer">
            <p class="footer-brand">‚ú¶ AstroCal ‚Äì La Brea, Trinidad & Tobago</p>
            <p class="footer-credit">Created by Joseph Singh, utilizing AI tools with vanilla JavaScript, HTML, and CSS</p>
            <p class="footer-apis">Powered by NASA APIs ‚Ä¢ Open-Meteo ‚Ä¢ Leaflet</p>
        </footer>
    </div>

    <!-- Leaflet JS for GIBS map -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="script.js?v=4.1"></script>
    <script src="gibs-map.js?v=4.1"></script>
    <script src="sky-map.js?v=4.1"></script>
</body>
</html>

